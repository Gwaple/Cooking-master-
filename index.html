<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ChefMaster: World Kitchen</title>
  <meta name="viewport" content="width=700, initial-scale=1">
  <style>
    html,body { margin:0;padding:0;background:#382a26;}
    body { font-family: 'Segoe UI', Arial, sans-serif; }
    #chef-home, #chef-auth { transition: opacity .3s; }
    #chef-userbar {
      position:absolute;top:10px;left:10px;z-index:10;display:none;
      font-size:1.08em;background:rgba(255,255,255,0.94);
      padding:8px 22px 8px 16px;border-radius:18px;box-shadow:0 1px 8px #ccc;}
    #chef-userbar button { margin-left:12px;background:#ffeaea;border:1px solid #fdc7c7;border-radius:6px;color:#b22222;cursor:pointer;}
    #chef-userbar .chef-xp {margin-left:18px;color:#fb8c00;font-weight:bold;}
    #chef-app-canvas {
      display:block;margin:60px auto 0 auto;background:#fffbe9;box-shadow:0 5px 36px #0007;border-radius:18px;
      outline: none;
    }
    .chef-btn {
      background:#fb8c00;color:#fff;font-weight:bold;font-size:1.1em;border:none;
      border-radius:10px;padding:12px 36px;box-shadow:0 2px 16px #fb8c00aa;cursor:pointer;
      transition:background .2s;
    }
    .chef-btn:hover { background:#ffb300; color:#a64b00;}
    .chef-input { width:90%;margin-bottom:10px;padding:9px;font-size:1.12em;border-radius:7px;border:1px solid #ccc;}
    #chef-sidequests {
      position:absolute;top:20px;right:30px;z-index:10;
      background:rgba(255,250,220,0.98);border-radius:12px;padding:13px 22px;font-size:1.05em;
      box-shadow:0 2px 20px #fb8c00a0;min-width:200px;max-width:300px;
      color:#7f4b00;
      display:none;
    }
    #chef-sidequests h3 {margin:0 0 8px 0;font-size:1.13em;color:#fb8c00;}
    #chef-sidequests ul {margin:0 0 0 12px;padding:0;}
    #chef-sidequests li {margin-bottom:6px;}
    #chef-cuisine-select {
      display:none;position:fixed;z-index:15;left:0;top:0;width:100vw;height:100vh;align-items:center;justify-content:center;background:rgba(56,42,38,0.85);
    }
    #chef-cuisine-box {
      background:#fffbe9;border-radius:24px;box-shadow:0 3px 36px #fb8c00;padding:36px 36px 22px 36px;min-width:320px;max-width:600px;
      text-align:center;
    }
    .cuisine-btn {
      margin:14px; font-size:1.2em; padding:16px 34px; border-radius:13px; border:2px solid #fb8c00; background:#fffbe9; color:#fb8c00; cursor:pointer; font-weight:bold;
      transition:background .2s, color .2s;
    }
    .cuisine-btn:hover { background:#fb8c00; color:#fffbe9;}
  </style>
</head>
<body>
<!-- HOMEPAGE -->
<div id="chef-home" style="display:flex;position:fixed;z-index:11;left:0;top:0;width:100vw;height:100vh;align-items:center;justify-content:center;background:#382a26;">
  <div style="background:rgba(255,243,222,0.98);border-radius:26px;padding:38px 36px;min-width:480px;max-width:700px;text-align:center;box-shadow:0 8px 60px #c96c1c;">
    <canvas id="chef-home-anim" width="600" height="230" style="display:block;margin:auto;margin-bottom:14px;border-radius:16px;"></canvas>
    <h1 style="color:#fb8c00;font-family:Arial Black,Arial,sans-serif;font-size:2.1em;letter-spacing:2px;margin:0 0 14px 0;text-shadow:0 3px 12px #fffbe9,0 1px 0 #c96c1c;">CHEFMASTER WORLD KITCHEN</h1>
    <div style="color:#533c28;font-size:1.11em;margin-bottom:18px;">
      <p>Pick your cuisine, complete side quests, compete for high scores!<br>More avatars, more recipes, more kitchen action.</p>
    </div>
    <button onclick="chefGoToLogin()" class="chef-btn">Sign In / Register</button>
    <div style="margin-top:20px;font-size:.98em;color:#b66a00;">By Gwaple</div>
  </div>
</div>
<!-- LOGIN/REGISTER OVERLAY -->
<div id="chef-auth" style="display:none;position:fixed;z-index:12;left:0;top:0;width:100vw;height:100vh;align-items:center;justify-content:center;background:rgba(56,42,38,0.85);">
  <div id="chef-login-box" style="background:#fffbe9;border-radius:15px;box-shadow:0 2px 24px #b66a00;padding:30px 28px 22px 28px;min-width:240px;max-width:330px;">
    <h2 style="margin-top:0;text-align:center;color:#fb8c00;">Sign In</h2>
    <input id="chef-login-user" class="chef-input" placeholder="Username"><br>
    <input id="chef-login-pass" type="password" class="chef-input" placeholder="Password"><br>
    <button onclick="chefLogin()" class="chef-btn" style="width:90%;">Sign In</button>
    <button onclick="chefShowRegister()" class="chef-btn" style="width:90%;margin-top:6px;background:#fffbe9;color:#fb8c00;border:1px solid #fb8c00;">Register</button>
    <button onclick="chefGoHome()" class="chef-btn" style="width:90%;margin-top:6px;background:#fff;color:#382a26;border:1px solid #c96c1c;">Home</button>
    <div id="chef-login-msg" style="min-height:18px;margin-top:10px;color:#ff6060;"></div>
  </div>
  <div id="chef-register-box" style="display:none;background:#fffbe9;border-radius:15px;box-shadow:0 2px 24px #b66a00;padding:30px 28px 22px 28px;min-width:240px;max-width:330px;">
    <h2 style="margin-top:0;text-align:center;color:#fb8c00;">Register</h2>
    <input id="chef-reg-user" class="chef-input" placeholder="Username"><br>
    <input id="chef-reg-pass" type="password" class="chef-input" placeholder="Password"><br>
    <button onclick="chefRegister()" class="chef-btn" style="width:90%;">Register</button>
    <button onclick="chefShowLogin()" class="chef-btn" style="width:90%;margin-top:6px;background:#fffbe9;color:#fb8c00;border:1px solid #fb8c00;">Back</button>
    <button onclick="chefGoHome()" class="chef-btn" style="width:90%;margin-top:6px;background:#fff;color:#382a26;border:1px solid #c96c1c;">Home</button>
    <div id="chef-register-msg" style="min-height:18px;margin-top:10px;color:#8dff6e;"></div>
  </div>
</div>
<!-- CUISINE SELECT -->
<div id="chef-cuisine-select">
  <div id="chef-cuisine-box">
    <h2 style="color:#fb8c00;">Choose a Cuisine</h2>
    <div id="cuisine-options"></div>
    <button onclick="chefHideCuisineSelect()" class="cuisine-btn" style="background:#eee;color:#fb8c00;">Cancel</button>
  </div>
</div>
<!-- USERBAR -->
<div id="chef-userbar">
  <span id="chef-userbar-welcome"></span>
  <span class="chef-xp"></span>
  <button onclick="chefLogout()">Logout</button>
</div>
<!-- SIDE QUESTS PANEL -->
<div id="chef-sidequests"></div>
<!-- MAIN APP CANVAS (for cooking game/logic) -->
<canvas id="chef-app-canvas" width="650" height="780" tabindex="0"></canvas>
<script>
// --- HOMEPAGE ADVANCED ANIMATION: Chefs, food, kitchen, avatars
function chefAnimHomepage() {
  const c = document.getElementById('chef-home-anim');
  if (!c) return;
  const ctx = c.getContext('2d');
  let t = 0;
  // Chefs and customers
  const chefAvatars = [
    {skin:"#f0c4a2",x:90,y:150,emoji:"üë®‚Äçüç≥"},
    {skin:"#f7e7c3",x:200,y:110,emoji:"üë©‚Äçüç≥"},
    {skin:"#bc8b4b",x:470,y:145,emoji:"üßë‚Äçüç≥"},
    {skin:"#e3b57e",x:340,y:80,emoji:"üë®üèæ‚Äçüç≥"},
  ];
  const customers = [
    {emoji:"üßë‚Äçü¶±",x:60,y:210,dx:0.8},
    {emoji:"üë©‚Äçü¶∞",x:500,y:205,dx:-0.7},
    {emoji:"üßî",x:120,y:220,dx:1.1},
    {emoji:"üë©",x:420,y:225,dx:-1.2}
  ];
  let food = [
    {img:"üçï",x:180,y:105,dx:1.5,dy:0.11,rot:0,dr:0.009},
    {img:"üç£",x:370,y:90,dx:-1.7,dy:0.4,rot:0,dr:-0.012},
    {img:"üåÆ",x:290,y:140,dx:0.9,dy:1.2,rot:0,dr:0.013},
    {img:"ü•ü",x:220,y:120,dx:1.1,dy:1.0,rot:0,dr:0.012},
    {img:"üçî",x:315,y:165,dx:1.1,dy:0.5,rot:0,dr:0.009}
  ];
  function drawChar(emoji, x, y, scale=1) {
    ctx.save(); ctx.translate(x,y); ctx.scale(scale,scale);
    ctx.font="2.7em serif";
    ctx.globalAlpha=0.95;
    ctx.fillText(emoji,0,0);
    ctx.restore();
  }
  function draw() {
    ctx.clearRect(0,0,600,230);
    // BG
    ctx.fillStyle="#fffbe9"; ctx.fillRect(0,0,600,230);
    // Kitchen counter
    ctx.fillStyle="#e0b584"; ctx.fillRect(0,190,600,45);
    // Chefs
    for(let chef of chefAvatars) {
      let bob = Math.sin(t/12 + chef.x/40)*7;
      drawChar(chef.emoji, chef.x, chef.y+bob, 1.06+Math.sin(t/20+chef.x/100)*0.03);
    }
    // Customers (move left/right)
    for(let cu of customers) {
      drawChar(cu.emoji, cu.x, cu.y + Math.sin(t/11+cu.x/60)*6, 0.95);
      cu.x += cu.dx;
      if(cu.x<40 || cu.x>560) cu.dx *= -1;
    }
    // Animated flying food
    for(let f of food) {
      ctx.save(); ctx.translate(f.x,f.y); ctx.rotate(f.rot);
      ctx.font="2.1em serif"; ctx.globalAlpha=0.91;
      ctx.fillText(f.img,0,0); ctx.restore();
      f.x += f.dx; f.y += f.dy; f.rot += f.dr;
      if (f.x<50||f.x>550){f.dx*=-1;}
      if (f.y<50||f.y>170){f.dy*=-1;}
    }
    ctx.font="bold 1.9em Arial"; ctx.fillStyle="#fb8c00";
    ctx.fillText("World Kitchen",220,56+Math.sin(t/15)*6);
    t++; requestAnimationFrame(draw);
  }
  draw();
}

// --- CUISINES, RECIPES, ETC ---
const CUISINES = [
  {
    name:"Italian",emoji:"üçï",color:"#e74c3c",
    recipes: [
      {name:"Pizza Margherita",emoji:"üçï",steps:["Knead dough","Add sauce","Add cheese","Bake","Slice"],controls:["K","S","C","B","Space"],unlock:0,timer:[12,8,8,18,5],points:60},
      {name:"Pasta Carbonara",emoji:"üçù",steps:["Boil pasta","Fry pancetta","Add eggs","Mix","Serve"],controls:["B","F","E","M","Space"],unlock:1,timer:[10,10,6,6,3],points:55},
      {name:"Tiramisu",emoji:"üç∞",steps:["Brew coffee","Dip biscuits","Layer cream","Dust cocoa","Chill"],controls:["B","D","L","D","C"],unlock:2,timer:[7,6,8,5,15],points:40}
    ]
  },
  {
    name:"Japanese",emoji:"üç£",color:"#1abc9c",
    recipes: [
      {name:"Sushi Roll",emoji:"üç£",steps:["Cook rice","Slice fish","Roll sushi","Cut","Serve"],controls:["C","S","R","Cut","Space"],unlock:0,timer:[9,7,11,6,3],points:60},
      {name:"Ramen",emoji:"üçú",steps:["Boil noodles","Prepare broth","Add toppings","Assemble","Serve"],controls:["B","P","A","A","Space"],unlock:1,timer:[10,8,9,7,3],points:55},
      {name:"Mochi",emoji:"üç°",steps:["Mix dough","Steam","Fill","Roll","Serve"],controls:["M","S","F","R","Space"],unlock:2,timer:[7,12,7,8,3],points:40}
    ]
  },
  {
    name:"French",emoji:"ü•ê",color:"#f8c471",
    recipes: [
      {name:"Croissant",emoji:"ü•ê",steps:["Mix dough","Fold butter","Shape","Proof","Bake"],controls:["M","F","S","P","B"],unlock:0,timer:[10,13,9,15,18],points:65},
      {name:"Ratatouille",emoji:"üçÜ",steps:["Chop veggies","Saut√©","Layer","Bake","Garnish"],controls:["C","S","L","B","G"],unlock:1,timer:[7,11,9,15,6],points:50},
      {name:"Cr√®me Br√ªl√©e",emoji:"üçÆ",steps:["Mix cream","Bake","Chill","Torch sugar","Serve"],controls:["M","B","C","T","Space"],unlock:2,timer:[6,14,13,6,3],points:55}
    ]
  },
  {
    name:"Mexican",emoji:"üåÆ",color:"#e67e22",
    recipes: [
      {name:"
